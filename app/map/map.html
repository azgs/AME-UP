			<div ng-controller="MapController" layout="row" layout-fill>
			
				<md-sidenav md-component-id="left" class="md-sidenav-left" md-is-locked-open="$mdMedia('min-width: 333px')" style="width: 35%;height="100%">
					<md-tabs layout-fill>
						<md-tab label="Layers">
							<md-tab-body>
								<md-content layout-padding style="background: #f6f6f6;border: 1px solid #e1e1e1;">
									<form>
									
										<!-- uncomment to enable Show All -->
										<md-button ng-click="toggleShowAllGroups()" class="md-icon-button md-accent" style="margin-left:90%;" aria-label="ShowAll">
											<md-icon ng-if="data.showAll" md-font-icon="fa-list-ul"  class="fa" style="font-size:20px"></md-icon>
											<md-tooltip ng-if="data.showAll" md-direction="left" md-autohide="true">
												Show Active Groups
											</md-tooltip>
											<md-icon ng-if="!data.showAll" md-font-icon="fa-list"  class="fa" style="font-size:20px"></md-icon>
											<md-tooltip ng-if="!data.showAll" md-direction="left" md-autohide="true">
												Show All Groups
											</md-tooltip>
										</md-button>
										<!-- -->
										
										<md-accordion>
											<div ng-repeat="group in groups | filter: (data.showAll ? '' : {active:true})" ol-layer-properties="group">
												<md-accordion-group style="position:relative">
												<div layout="row"  style="width:100%;">
												
													<md-checkbox class="md-checkbox-small" style="position:absolute; top: 0px; left:0px;" ng-model="group.active" ng-change="groupActiveChange(group)" aria-label={{ group.name }}></md-checkbox>
													
													<md-accordion-content style="margin-left:30px" md-arrow="true" md-heading="{{ group.name }}" >
													
														<span flex=""></span>

														<!-- uncomment to enable Show All -->
														<md-button ng-click="toggleShowAllLayers(group)" class="md-icon-button md-accent" style="margin-left:85%;" aria-label="ShowAll">
															<md-icon ng-if="group.showAll" md-font-icon="fa-list-ul"  class="fa" style="font-size:20px"></md-icon>
															<md-tooltip ng-if="group.showAll" md-direction="left" md-autohide="true">
																Show Active Layers
															</md-tooltip>
															<md-icon ng-if="!group.showAll" md-font-icon="fa-list"  class="fa" style="font-size:20px"></md-icon>
															<md-tooltip ng-if="!group.showAll" md-direction="left" md-autohide="true">
																Show All Layers
															</md-tooltip>
														</md-button>
														<!-- -->
														
														<!--<div ng-repeat="layer in layers | filter:{group:group.name}" style="margin-left:10px">-->
														<!--<div ng-repeat="layer in layers | filter: (group.showAll ? {group:group.name} : {group:group.name, active:true}) | orderBy: '-active'" style="margin-left:10px">-->
														<div ng-repeat="layer in layers | filter: (group.showAll ? {group:group.name} : {group:group.name, active:true})" style="margin-left:10px">
															<div style="display:table;width:100%;height:10px">
																<div style="display:table-row">
																	<div style="display:table-cell;width:10%">
																		<md-checkbox class="md-checkbox-small"  ng-model="layer.active" ng-change="layerActiveChange(layer)" aria-label={{ layer.name }}>
																		</md-checkbox>
																	</div>
																	<div style="display:table-cell;width:70%">
																		<span class="layer-name">{{ layer.name }}</span>
																	</div>
																	<div style="display:table-cell;width:20%;">
																		<md-input-container class="md-opacity">
																			<input class="layer-name" style="width:6ch" id="opacity" type="number" min="0" max="1" step="0.01" ng-model="layer.opacity"/>
																			<md-tooltip md-direction="left">
																				Opacity
																			</md-tooltip>
																		</md-input-container>
																	</div>
																</div>
															
															
															</div>
														</div>
													</md-accordion-content>
												</div>
												</md-accordion-group>
												<md-divider style="margin-bottom:15px"></md-divider>
											</div>
										</md-accordion>
									</form>
								</md-content>
							</md-tab-body>
						</md-tab>
						<md-tab label="Legend" >
							<md-tab-body >
								<md-content layout-padding style="background: #f6f6f6;border: 1px solid #e1e1e1;">
								<div ng-repeat="group in groups | filter: {name: '!Base Maps', active:true}" ol-layer-properties="group">
									{{group.name}}
									<div ng-repeat="layer in layers | filter: {group: group.name, active:true}" style="margin-left:20px; margin-top:10px">
											<span class="layer-name">{{layer.name}}<span>
											<div ng-if="layer.source.type === 'ImageWMS'">
												<img ng-src="{{layer.source.legend_url}}"/>
											</div>
											<div ng-if="layer.source.type === 'TileArcGISRest'">
												<div ng-repeat="legendElement in layer.legend_json.layers[0].legend" >
													<img ng-src="data:image/png;base64, {{legendElement.imageData}}"/>
													{{legendElement.label}}
												</div>
											</div>
									</div>
									<md-divider style="margin-top:10px;"></md-divider>

								</div>
								</md-content>
							</md-tab-body>
						</md-tab>
						<md-tab label="Models">
							<md-tab-body>
								<md-content layout-padding style="background: #f6f6f6;border: 1px solid #e1e1e1;">
								<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin in cursus odio, eget malesuada est. Quisque commodo odio sit amet mauris aliquam, in viverra nisi lobortis. Donec in nisl ullamcorper, tristique arcu sit amet, ornare sem. Nam fermentum, nulla in pellentesque euismod, quam sem aliquam nisi, id auctor eros ex et lacus. Integer semper erat quis sem semper pulvinar. Mauris pellentesque sodales lorem. Donec interdum et magna eget luctus. Nam vestibulum metus ac mi suscipit scelerisque. Pellentesque aliquam gravida leo eu commodo. Pellentesque sed tristique augue. Donec varius blandit dolor, sit amet venenatis nibh laoreet ut. Nunc suscipit magna quis elit ullamcorper tincidunt.</p>

								<p>Vivamus vulputate placerat enim sit amet volutpat. Maecenas eget ultricies ante, ut consequat augue. Nunc lacus elit, viverra et suscipit at, mattis non erat. Morbi lorem arcu, porttitor id mauris sed, semper scelerisque nunc. Nullam luctus urna mi, et vehicula neque scelerisque eu. Aliquam tincidunt leo id leo finibus, varius mattis dui ornare. Duis porttitor sagittis risus, non scelerisque magna ultrices id. Donec scelerisque, neque vitae ullamcorper volutpat, tortor urna placerat felis, sit amet condimentum ante dolor sed neque. Cras rhoncus bibendum est sed suscipit. Donec nec dignissim ex. Nulla at suscipit neque, eget mollis libero. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p>
								</md-content>
							</md-tab-body>
						</md-tab>
						<md-tab label="Results">
							<md-tab-body >
								<md-content layout-padding style="background: #f6f6f6;border: 1px solid #e1e1e1;">
									<p>Maecenas vel fermentum purus. Duis ac sagittis erat, non consequat felis. Nullam bibendum iaculis ante vel suscipit. Suspendisse tincidunt maximus purus nec scelerisque. Aliquam hendrerit, lacus non luctus auctor, metus dui tristique mauris, at sagittis neque sem et nisi. Vivamus ultricies efficitur ante. Nullam ipsum eros, pulvinar ut congue vitae, ornare vitae est. Sed suscipit a lorem at lacinia. Mauris eu ante dui. Sed diam nunc, ultricies non neque quis, facilisis sodales velit. Sed hendrerit facilisis odio scelerisque eleifend. Proin nec mi sit amet elit congue sodales sed sit amet erat. Aliquam commodo, lacus id vulputate volutpat, dolor nisi tincidunt ipsum, vitae sollicitudin odio justo sit amet sem. Sed non fermentum lacus. Vivamus ipsum nulla, tristique nec laoreet at, rhoncus in magna.</p>

									<p>Vivamus placerat velit ac justo hendrerit, ac dapibus metus efficitur. Donec gravida dui lectus, et feugiat odio tempor sed. Donec eu auctor mauris. Vestibulum maximus libero ac congue commodo. Integer tempor ante odio. Nullam sit amet ex pellentesque erat faucibus eleifend id in velit. Fusce tincidunt libero nunc, a aliquet nisi gravida ut. Vestibulum luctus tortor libero, eu venenatis ipsum tempus venenatis. Praesent non risus ac sapien convallis gravida vitae eget turpis. Cras eleifend odio et enim eleifend, sed vestibulum enim maximus. Sed volutpat augue in porttitor tristique.</p>

								</md-content>
							</md-tab-body>
						</md-tab>
					</md-tabs>
				</md-sidenav>

				<md-content>
					<openlayers  width="100%" height="93%" ol-defaults="defaults" ol-center="center" custom-layers="true" style="width: 70%; height: 100%; position:fixed">
							<ol-control name="{{ control.name }}" ng-repeat="control in controls|filter: {active: true}"></ol-control>
							<ol-layer name="{{ layer.name }}" ol-layer-properties="layer" ng-repeat="layer in layers|filter: { active: true}"></ol-layer>
					</openlayers>
				</md-content>
			</div>	
